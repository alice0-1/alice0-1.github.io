
<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
        <title>𝓐𝓵𝓲𝓬𝓮01</title>
        <meta name="author" content="alice01">
        <meta name="description" content="𝓗𝓪𝓹𝓹𝔂 𝓼𝓾𝓰𝓪𝓻 𝓵𝓲𝓯𝓮.">
        <meta name="keywords" content="">
        <link rel="icon" href="/images/avatar.jpg">
        <script src="https://cdn.staticfile.org/instant.page/5.1.0/instantpage.min.js" type="module"></script>
        <script src="https://cdn.staticfile.org/font-awesome/6.1.1/js/all.min.js"></script>
        <link rel="stylesheet" href="/css/fonts.min.css">
        <link rel="stylesheet" href="/css/particlex.css">
        <script src="https://cdn.staticfile.org/vue/3.2.33/vue.global.prod.min.js"></script>
    <meta name="generator" content="Hexo 6.2.0"></head>
    <body>
        <div id="loading" style="height:100vh;width:100vw;position:fixed;display:flex;z-index:200;justify-content:space-between;background:#fff;transition:opacity 0.3s ease-out"><div style="position:fixed;height:100vh;width:100vw;display:flex;justify-content:center;align-items:center"><div id="loadcontent" style="width:50vmin;height:50vmin;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px #a3ddfb;text-align:center"><div><h2>LOADING...</h2><p style="word-break:keep-all">加载过慢请开启缓存(浏览器默认开启)</p><div><img alt="loading" src="/loading.gif"></div></div></div></div></div>
        <div id="layout">
            <i data-fa-symbol="calendar-solid" class="fa-solid fa-calendar fa-fw"></i>
            <i data-fa-symbol="bookmark-solid" class="fa-solid fa-bookmark fa-fw"></i>
            <i data-fa-symbol="tags-solid" class="fa-solid fa-tags fa-fw"></i>
            <transition name="into">
                <div v-show="show_page" style="display: -not-none">
                    <div id="menu_show">
                         
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">𝓐𝓵𝓲𝓬𝓮01</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;about</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;tags</span>
        </a>
        
    </div>
    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div class="curtain" @click="menu_show = !menu_show" v-show="menu_show"></div>
        <div :class="'title'" @click="menu_show = !menu_show">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;𝓐𝓵𝓲𝓬𝓮01</span>
        </div>
        <transition name="slide">
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-house fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">home</div>
                </div>
            </a>
            
            <a href="/about">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-id-card fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">about</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-box-archive fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">archives</div>
                </div>
            </a>
            
            <a href="/categories">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-bookmark fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">categories</div>
                </div>
            </a>
            
            <a href="/tags">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-tags fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">tags</div>
                </div>
            </a>
            
        </div>
        </transition>
    </div>
</nav>
                    </div>
                    <div id="main">
                        <div id="home-head">
    <div id="home-background" style="background-image: url(/images/background.jpg)"></div>
    
    <div id="home-info" class="home-info" @click="home_click">
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="info">
            <div class="wrap">
                <h1>𝓐𝓵𝓲𝓬𝓮01</h1>
                <h3></h3>
                <h5>𝓗𝓪𝓹𝓹𝔂 𝓼𝓾𝓰𝓪𝓻 𝓵𝓲𝓯𝓮.</h5>
            </div>
        </span>
    </div>
    
</div>

<div id="home-posts-wrap" class=>
    <div id="home-posts">
        <div id="posts">
            

<div class="post">
    <a href="/2023/12/04/hvv蓝队/">
        <h2>
            日志命令
        </h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <svg class="fa-icon"><use xlink:href="#calendar-solid"></use></svg>
            </span>
            2023/12/4
        </span>
    </div>
    <div class="excerpt">
        <div class="content" v-pre>
            
            <p>流程:准备-检测-遏制-根除-恢复-跟踪报告</p>
<p>windows日志<br>    开机启动项:msconfig | regedit&gt;users&amp;&amp;machine<br>    临时文件:%temp%<br>    最近文件:%userprofile%\recent<br>    端口netstat<br>    进程:msinfo32&gt;software environment&gt;running tasks	查找进程:tasklist | findstr “PID”	关闭进程： taskkill &#x2F;PID<br>    计划任务: at<br>    账户:net user 隐藏账户$ 通过图形化日志查找<br>    系统(补丁):systeminfo<br>    本地用户和组:lusrmgr.msc<br>    日志:eventvwr.msc<br>    服务:services.msc</p>
<p>linux日志<br>    开机自启:etc&#x2F;init.d<br>    临时文件:etc&#x2F;temp<br>    时间查找:find .&#x2F; -$time $ -name “.$”<br>    端口:netstat<br>    进程:ps aux<br>    登录:last -i<br>    用户:etc&#x2F;passwd etc&#x2F;shadow<br>    历史:root&#x2F;.bash_history<br>    计划任务:crontab<br>    日志:var&#x2F;log<br>    $path:echo $path</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/12/04/hvv蓝队/" class="go-post">
        阅读全文
    </a>
</div>

<div class="post">
    <a href="/2023/04/18/面试/">
        <h2>
            面试
        </h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <svg class="fa-icon"><use xlink:href="#calendar-solid"></use></svg>
            </span>
            2023/4/18
        </span>
    </div>
    <div class="excerpt">
        <div class="content" v-pre>
            
            <p>owasp top10: sqli 失效身份认证 敏感数据泄露 XXE<br>失效访问控制 安全配置错误 XSS 反序列化<br>使用含已知漏洞的组件 不足的日志记录和监控</p>
<p>rce:没对接口输入内容严格判断,造成攻击者构造的代码非法执行<br>    防御: (1)用json不用eval(2)用eval的地方严格处理数据</p>
<p>csrf: 攻击者盗用了受害者的身份，以受害者的名义发送恶意请求<br>    防御: (1)验证referer	(2)验证token		{[token安全级更高 因为随机且不可泄露]}</p>
<p>xxe: 由于程序在解析XML数据时,解析了攻击者伪造的xml<br>    危害: (1)加载恶意外部文件 (2)文件读取 (3)命令执行 (4)内网端口扫描 (5)攻击内网<br>    防御: XML数据,如果使用程序为PHP,将libxml_disable_entity_loader设为TRUE来禁用外部实体</p>
<p>ssrf: 利用一个服务当跳板来攻击内部其他服务<br>原因:服务器对其他服务器资源进行请求，没有做合法性验证<br>防御: (1)url白名单(2)校验返回内容(3)域名识别ip 过滤内部ip </p>
<p>反序列化: 序列化是将对象转化为字节序列,反序列化与其相反,如果没有严格过滤,就能构造恶意代码并将其序列化后传入函数。 </p>
<p>upload: 对用户文件上传部分的控制不足或处理缺陷,导致用户可以越权限向服务器上传可执行的动态脚本文件<br>    防御: (1)后端验证(2)mime验证(3)后缀检测(4)内容检测(5)自带函数过滤(6)waf<br>    条件竞争:上传文件没有校验,直接上传,上传成功才判断文件格式是否符合要求.如果符合则重命名,不符合,删除<br>    二次渲染:上传后会对图片进行二次处理,把里面的内容替换更新,完成后根据原有的图片生成一个新的图片</p>
<p>include: 引入一段用户能控制的脚本或代码,并让服务器端执行include()等函数通过动态变量的方式引入需要包含的文件,用户能够控制该动态变量<br>    伪协议: (1)file (2)http (3)ftp (4)php (5)data (6)ssh2 (7)expect (8)zlib<br>    防御: (1) allow_url_include&#x3D;off (2) open_basedir&#x3D;指定目录(3)魔术引号(4)改日志路径</p>
<p>xss原理: 将恶意js插入Web页面中，当用户浏览页面时，这些会被触发<br>反射型: 恶意代码并没有保存在目标网站，而Web应用程序把该恶意脚本“反射”回受害者的浏览器<br>存储型: 应用程序未检验数据是否存在XSS，便将其存入数据库。当下一次从数据库获取该数据,页面再次执行XSS代码<br>DOM型: 不与后台服务器数据交互,通过DOM操作前端代码输出的时候产生的问题。<br>绕过: (1)大小写(2)事件(3)空格(4)堆叠(5)伪协议<br>防御: (1)对输入内容编码(2)对重要cookie httponly (3)urlencode检测<br>Httponly:禁止js读取,如果cookie中的一个参数带有httponly，则这个参数将不能被js获取；httponly可以防止xss会话劫持攻击</p>
<p>sqli原理: 把SQL语句插入Web表单,提交请求的查询字符串,骗服务器执行恶意的SQL命令<br> 注入点类型:(1)数字注入(2)字符串注入(3)搜索注入<br> 提交方式: (1)GET(2)POST(3)COOKIE(4)HTTP头注入(XFF,UA,REFERER注入）<br> 获取信息的方式: (1)布尔盲注(2)时间盲注(3)报错注入(4)联合查询(5)堆叠查询<br>绕过: (1)大小写 (2)双写 (3)空格 (4)注释符号绕过 (5)十六进制绕过 (6)ascii码绕过<br>防御: (1)过滤,转义,替换,删除 (2)预编译 (3)限制关键字,限制输入长度 (4)waf</p>
<p>宽字节注入:GB2312,GBK等编码类型属于宽字节,输入的单个字符被转换成ACSII码,当两个ACSII码组合起来会被宽字节再次编码为特殊文字绕过检验</p>
<p>二次注入<br>第一次插入数据时，仅使用了<code>addslashes</code>或借助<code>get_magic_quotes_gpc</code>对特殊字符转义,在写入数据库时保留了原数据,但数据本身还是脏数据,存入数据库之后,认为数据是可信的。在下一次进行查询时,直接从数据库取出脏数据,没有进一步的检验</p>
<p>sqli写shell<br>union 跟select into outfile，将一句话写入eval.php<br>?id&#x3D;1 union select 1,”<?马?>“,3 into outfile ‘绝对路径’<br>权限要求：secure_file_priv支持web目录文件导出、数据库用户File权限、获取物理路径。</p>
<p>sql注入盲注sleep()函数禁用<br>使用同样功能的函数代替，比如benchmark() Get_lock()函数</p>
<p>常用的报错注入的函数<br>floor()函数、exp()函数、updatexml()函数、join()函数</p>
<p>菜刀流量特征: (1)eval()(2)base64编码(3) 请求体中有(base64_decode($_POST[z0]);通过&amp;z0&#x3D;QGluaV9zZXQ…传递payload</p>
<p>蚁剑流量特征: (1)默认的 user-agent 请求头是 antsword xxx(2)正文内容用URL加密，解密后流量最中明显的特征为ini_set (“display_errors”,”0”);</p>
<p>冰蝎流量特征:流量动态加密<br>1.请求包Content-Type: application&#x2F;octet-stream<br>2.返回包Transfer-Encoding:chunked<br>冰蝎二 (1)二次密钥协商(2)内置十多个ua头(3)content-length: 16 (4) accept字段:字段很特殊：text&#x2F;html, image&#x2F;gif, image&#x2F;jpeg, *; q&#x3D;.2, &#x2F;; q&#x3D;.2<br>冰蝎三(1)预共享密钥(2)内置16个ua头(3) content-type: text&#x2F;html;charset&#x3D;utf-8 (4)accept: 字段特殊</p>
<p>哥斯拉流量特征: base64加密<br>(1)请求 Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,&#x2F;;q&#x3D;0.8<br>(2)响应Cache-Control: no-store, no-cache, must-revalidate,<br>(3)所有请求中Cookie后面都存在；特征</p>
<p>cs流量特征: 4.0版本的UA头是固定的submit.php带?id参数 ja3值固定</p>
<p>log4j2原理: log4j2框架下的lookup查询服务提供了{}字段解析功能,传进去的值会被直接解析,这样不对lookup的出栈进行限制,可能让查询指向任何服务,攻击者可以利用这点进行JNDI注入，使得受害者请求远程服务来链接本地对象，在lookup的{}里面构造payload，调用JNDI服务向攻击者提前部署好的恶意站点获取恶意的.class对象，造成了远程代码执行（可反弹shell到指定服务器）</p>
<p>fastjson原理:在请求包中发送恶意json格式payload，漏洞在处理json对象的时候，没有对@type过滤，导致可以传入恶意的TemplatesImpl类,这个类有一个字段就是_bytecodes，部分函数会根据这个生成java实例,达到fastjson通过字段传一个类,再通过这个类被生成时执行构造函数</p>
<p>Weblogic存在管理后台,通过账号密码登录，由于管理员经常用弱口令，或者默认的账户名密码。因此存在弱口令爆破的风险。</p>
<p>Shiro反序列化漏洞:Apache Shiro框架提供RemeberMe,登录成功后会生成经过加密并编码的cookie。cookie的key为RemeberMe，cookie的值是经过对相关信息进行序列化，然后使用aes加密，最后在使用base64编码处理形成的,在调用反序列化的时候未进行任何过滤,导致可以触发远程代码执行漏洞</p>
<p>中间件漏洞<br>IIS: PUT漏洞,短文件名猜解,远程代码执行,解析漏洞<br>Apache: 解析漏洞,目录遍历等<br>Nginx:文件解析,目录遍历,CRLF注入,目录穿越<br>Tomcat: 远程代码执行,war后门文件部署<br>JBoss: 反序列化漏洞、war后门文件部署<br>WebLogic: 反序列化漏洞,SSRF任意文件上传,war后门文件部署等</p>
<p>登录框&#x2F;登录页面漏洞<br>注入点及万能密码<br>敏感信息泄露<br>验证码绕过<br>无限注册帐号<br>任意密码重置<br>明文传输<br>越权</p>
<p>redis数据库和常见的漏洞<br>答：redis是一个非关系型数据库,默认端口6379。常见漏洞是未授权,攻击者无需认证就可以访问内部数据,也能getshell。</p>
<p>欺骗防御系统_蜜罐 入侵防护系_ips 入侵检测系统_ids web应用安全防护系统_waf 终端高级威胁检测与响应系统_edr安全管理与态势感知平台_csa超融合检测探针_csp 全流量分析取证系统_nft 高级持续性威胁检测和管理系统_tar</p>
<p>应急响应<br>1.准备已经编译好的工具以及取证分析等工具干净可靠放U盘<br>2.初步判断事件的类型，是被入侵、ddos还是其它的原因<br>3.首先抑制范围、影响范围，隔离使受害面不继续扩大。<br>4.寻找原因,封堵攻击源。<br>5.把业务恢复至正常水平<br>6.监控有无异常，报告、管理环节的自省和改进措施。</p>
<p>溯源: 攻击源捕获-溯源处置-攻击者画像<br>捕获(1)​设备报警 日志与流量 ​钓鱼邮件 蜜罐	<br>处置(2)ip定位 id追踪 url 恶意样本分析 社交账号<br>画像(3)目的 代理 手法 身份 联系方式 组织</p>
<p>渗透测试流程: 信息收集 漏洞扫描 手动挖掘 验证漏洞 修复建议 复验漏洞 输出报告<br>信息收集: ip 端口 子域名 旁站 c段 waf 目录 cms 网络空间搜索引擎 谷歌语法 whois<br>CDN ip:DNS历史解析记录 网络空间安全引擎(fofa) 多地ping看是否有cdn</p>
<p>逻辑漏洞:验证码复用-暴力破解,短信&#x2F;邮件轰炸,未授权访问,越权,并发,支付金额修改<br>越权判断:例如修改一些参数值，id为0还是1、admin为true还是false等</p>
<p>同源策略:同协议,端口,域名共享cookie</p>
<p>getshell的方式: 文件上传,RCE,文件包含,反序列化</p>
<p>判断出网站的 CMS 对渗透的意义<br>查找网上已曝光的程序漏洞。 如果开源，还能下载相对应的源码进行代码审计。</p>
<p>session:原理<br>客户端登录后，服务器创建对应的session创建完会把 session 的id发送给客户端，客户端再存储到浏览器中。这样客户端每次访问服务器时,都会带着 sessionid，服务器拿到 sessionid 之后，在内存找到与之对应的 session</p>
<p>php函数 命令执行<br>System exec shell_exec pcntl_exec popen passthru proc_open</p>
<p>常见端口: db2 5000  mysql3306 sqlserver1422 mssql1433 redis6379 Oracle1521 ftp21 ssh22 telnet23 smtp25 http443 weblogic7001 openssl443  </p>
<p>3389端口无法连接的几种情况<br>3389关闭状态，2.端口修改，3.防火墙连接，4.处于内网环境，5.超过了服务器最大连接数，6.管理员设置权限,指定用户登录。</p>
<p>内网信息收集思路<br>(1)判断是否存在域 (2)定位域控 (3)域基本信息查询（所有域、域信任信息、域 密码策略） (4)域内用户查询（定位域管） (5)域内主机查询 (6)BloodHound工具</p>
<p>内网渗透思路<br>代理穿透 权限维持 信息收集 口令爆破凭据窃取 社工 横纵向移动 拿下域控</p>
<p>Windows提权<br>系统内核溢出提权<br>数据库提权<br>错误的系统配置提权<br>DLL劫持提权<br>特权第三方软件or服务提权<br>令牌窃取提权<br>web中间件漏洞提权<br>AT，SC，PS提权</p>
<p>Linux提权<br>内核溢出漏洞提权<br>Suid和guid<br>不安全的环境变量提权<br>定时任务提权<br>数据库提权</p>
<p>Shellcode免杀:编码 加壳 混淆 分离免杀 特征码修改 添加无用逻辑语句 重写api<br>分离免杀: 分为加载器和shellcode两部分,一般将shellcode存储在网页或者图片中，然后加载器远程加载存在shellcode的网页或者图片之类的</p>
<p>白银票据与黄金票据的区别<br>1.白银票据不经过KDC,因此白银日志相对黄金会少，同时白银的日志都在目标服务器上,域控上不会有日志<br>2.白银利用服务账户的哈希值,不同于黄金利用krbtgt账户的哈希值，因此白银票据更加隐蔽，但白银票据的权限就远不如黄金</p>
<p>正反向shell<br>正向Shell：攻击者连接被攻击者,可用于攻击者处于内网，被攻击者公网<br>反向 Shell：被攻击者主动连接攻击者，可用于攻击者处—-<br>正向代理，客户端代理，服务器不知道实际发起请求的客户端<br>反向代理，服务器代理，客户端不知道实际提供服务的服务端</p>
<p>代理转发常用的工具<br>Frp		Neo-reGeorg		ssf	ew	Venom</p>
<p>暗链:通过利用CSS、JS来隐藏链接,通常指向非法网站<br>检测:查看网站源码找不明链接</p>
<p>OSI模型:物理层,数据链路层,网络层,传输层,会话层,表达层,应用层</p>
<p>三次握手: 客户端连接服务器,先对服务器发SYN包(连接请求数据),询问是否可连接,服务器如果同意,就回复一个SYN+ACK,客户端收到后回复一个ACK包,连接建立</p>
<p>udp和tcp: udp资源占用与性能消耗少,tcp稳定可靠</p>
<p>windows下载: (1)certutil.exe (2)powershell (3)bitsadmin (4)vbs (5)ftp</p>
<p>web常用加密算法:<br>非对称加密 RSA、ElGamal、Rabin 对称加密 DES、3DES、AES 散列算法 MD5 SHA base64</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/04/18/面试/" class="go-post">
        阅读全文
    </a>
</div>

             
<div class="page-current">
    <div class="prev">
        
    </div>
    <div class="page-index">
        
        <span class="current">
            1
        </span>
        
    </div>
    <div class="next">
        
    </div>
</div>
        </div>
    </div>
    
    <div id="home-card">
        <div id="card-div">
    <div class="card-style" style="width: 300px">
        <div class="avatar">
            <img src="/images/avatar.jpg " alt="avatar">
        </div>
        <div class="name">
            alice01
        </div>
        <div class="descriptions">
            
            <div class="description">
                𝓼𝓬𝓪𝓽𝓽𝓮𝓻𝓮𝓭 𝓲𝓷 𝔂𝓸𝓾𝓻 𝓼𝓴𝔂
            </div>
            
        </div>
        <div class="icon-links">
            
        </div>
        <div class="friend-links">
            
        </div>
    </div>
</div>
    </div>
    
</div>
                         
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2022 - 2023 𝓐𝓵𝓲𝓬𝓮01
            <span class="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            @alice01
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> & <a
                target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div>
        
    </div>
</footer>
                    </div>
                </div>
            </transition>
            <div id="img_show">
                <img id="img_content" alt="img_show">
            </div>
        </div>
        <script src="https://cdn.staticfile.org/highlight.js/11.5.1/highlight.min.js"></script>
        <script src="/js/particlex.js"></script>
        <script src="/js/showimg.js"></script>
        

    </body>
</html>