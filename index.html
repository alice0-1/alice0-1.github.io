
<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
        <title>𝓐𝓵𝓲𝓬𝓮01</title>
        <meta name="author" content="alice01">
        <meta name="description" content="𝓗𝓪𝓹𝓹𝔂 𝓼𝓾𝓰𝓪𝓻 𝓵𝓲𝓯𝓮.">
        <meta name="keywords" content="">
        <link rel="icon" href="/images/avatar.jpg">
        <script src="https://cdn.staticfile.org/instant.page/5.1.0/instantpage.min.js" type="module"></script>
        <script src="https://cdn.staticfile.org/font-awesome/6.1.1/js/all.min.js"></script>
        <link rel="stylesheet" href="/css/fonts.min.css">
        <link rel="stylesheet" href="/css/particlex.css">
        <script src="https://cdn.staticfile.org/vue/3.2.33/vue.global.prod.min.js"></script>
    <meta name="generator" content="Hexo 6.2.0"></head>
    <body>
        <div id="loading" style="height:100vh;width:100vw;position:fixed;display:flex;z-index:200;justify-content:space-between;background:#fff;transition:opacity 0.3s ease-out"><div style="position:fixed;height:100vh;width:100vw;display:flex;justify-content:center;align-items:center"><div id="loadcontent" style="width:50vmin;height:50vmin;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px #a3ddfb;text-align:center"><div><h2>LOADING...</h2><p style="word-break:keep-all">加载过慢请开启缓存(浏览器默认开启)</p><div><img alt="loading" src="/loading.gif"></div></div></div></div></div>
        <div id="layout">
            <i data-fa-symbol="calendar-solid" class="fa-solid fa-calendar fa-fw"></i>
            <i data-fa-symbol="bookmark-solid" class="fa-solid fa-bookmark fa-fw"></i>
            <i data-fa-symbol="tags-solid" class="fa-solid fa-tags fa-fw"></i>
            <transition name="into">
                <div v-show="show_page" style="display: -not-none">
                    <div id="menu_show">
                         
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">𝓐𝓵𝓲𝓬𝓮01</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;about</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;tags</span>
        </a>
        
    </div>
    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div class="curtain" @click="menu_show = !menu_show" v-show="menu_show"></div>
        <div :class="'title'" @click="menu_show = !menu_show">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;𝓐𝓵𝓲𝓬𝓮01</span>
        </div>
        <transition name="slide">
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-house fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">home</div>
                </div>
            </a>
            
            <a href="/about">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-id-card fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">about</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-box-archive fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">archives</div>
                </div>
            </a>
            
            <a href="/categories">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-bookmark fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">categories</div>
                </div>
            </a>
            
            <a href="/tags">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-tags fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">tags</div>
                </div>
            </a>
            
        </div>
        </transition>
    </div>
</nav>
                    </div>
                    <div id="main">
                        <div id="home-head">
    <div id="home-background" style="background-image: url(/images/background.jpg)"></div>
    
    <div id="home-info" class="home-info" @click="home_click">
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="info">
            <div class="wrap">
                <h1>𝓐𝓵𝓲𝓬𝓮01</h1>
                <h3></h3>
                <h5>𝓗𝓪𝓹𝓹𝔂 𝓼𝓾𝓰𝓪𝓻 𝓵𝓲𝓯𝓮.</h5>
            </div>
        </span>
    </div>
    
</div>

<div id="home-posts-wrap" class=>
    <div id="home-posts">
        <div id="posts">
            

<div class="post">
    <a href="/2023/12/04/hvv蓝队/">
        <h2>
            日志命令
        </h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <svg class="fa-icon"><use xlink:href="#calendar-solid"></use></svg>
            </span>
            2023/12/4
        </span>
    </div>
    <div class="excerpt">
        <div class="content" v-pre>
            
            <p>流程:准备-检测-遏制-根除-恢复-跟踪报告</p>
<p>windows日志<br>    开机启动项:msconfig | regedit&gt;users&amp;&amp;machine<br>    临时文件:%temp%<br>    最近文件:%userprofile%\recent<br>    端口netstat<br>    进程:msinfo32&gt;software environment&gt;running tasks	查找进程:tasklist | findstr “PID”	关闭进程： taskkill &#x2F;PID<br>    计划任务: at<br>    账户:net user 隐藏账户$ 通过图形化日志查找<br>    系统(补丁):systeminfo<br>    本地用户和组:lusrmgr.msc<br>    日志:eventvwr.msc<br>    服务:services.msc</p>
<p>linux日志<br>    开机自启:etc&#x2F;init.d<br>    临时文件:etc&#x2F;temp<br>    时间查找:find .&#x2F; -$time $ -name “.$”<br>    端口:netstat<br>    进程:ps aux<br>    登录:last -i<br>    用户:etc&#x2F;passwd etc&#x2F;shadow<br>    历史:root&#x2F;.bash_history<br>    计划任务:crontab<br>    日志:var&#x2F;log<br>    $path:echo $path</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/12/04/hvv蓝队/" class="go-post">
        阅读全文
    </a>
</div>

<div class="post">
    <a href="/2023/04/18/面试/">
        <h2>
            笔记
        </h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <svg class="fa-icon"><use xlink:href="#calendar-solid"></use></svg>
            </span>
            2023/4/18
        </span>
    </div>
    <div class="excerpt">
        <div class="content" v-pre>
            
            <p><span style="color:green;">php函数 命令执行</span><br>System exec shell_exec popen passthru<br>文件读取: file readfile fopen 文件执行:eval<br><span style="color:green;">常见端口:</span> ftp21 ssh22 telnet23 smtp25 win远程3389 http443 weblogic7001 mysql3306 redis6379 Oracle1521 sqlserver1422 db2 5000  mssql1433<br><span style="color:green;">同源策略:</span>同协议,端口,域名共享cookie<br><span style="color:green;">登录框&#x2F;登录页面漏洞</span><br>注入 弱口令 爆破 用户名枚举 验证码复用&#x2F;绕过 越权<br><span style="color:green;">中间件漏洞</span><br>iis: PUT任意文件写入,解析漏洞,短文件名猜解,rce<br>apache: 解析漏洞,目录遍历<br>nginx:文件解析,目录穿越,目录遍历<br>tomcat: 远程代码执行,war后门文件部署<br>jboss: 反序列化漏洞、war后门文件部署<br>WebLogic:反序列化漏洞,SSRF,war后门文件部署<br><span style="color:green;">3389端口无法连接的几种情况</span><br>(1)关闭状态(2)端口改了(3)waf(4)处于内网(5)最大连接数(6)指定用户登录<br><span style="color:green;">redis数据库常见的漏洞</span><br>答：redis是非关系型,端口6379 常见漏洞是未授权,无需认证就访问内部数据,也能getshell<br>误报怎么处理:先去看完成流量日志 确定误报后上报<br>扫描流量和手动流量:扫描数据量大有规律,手动少间隔长</p>
<p><span style="color:red;">应急响应:启动项 临时文件 进程 计划任务 账户 日志 服务</span></p>
<p>owasp top10: 注入 XSS XXE 反序列化<br>敏感数据泄露<br>失效身份认证 失效访问控制 安全配置错误<br>使用含已知漏洞的组件 不足的日志记录和监控</p>
<p>rce:没对接口输入严格判断,恶意代码非法执行<br>    防御: (1)用eval的地方严格处理数据(2)用json不用eval</p>
<p>csrf: 盗用受害者的身份发送恶意请求<br>    防御: (1)验证referer	(2)验证token token安全级更高 因为随机</p>
<p>xxe: 解析了攻击者伪造的xml<br>    危害: (1)文件读取 (2)命令执行 (3)内网端口探测<br>    防御: (1)禁用xml(2)过滤xml</p>
<p>ssrf: 以服务端为跳板攻击目标系统<br>原因:服务器对其他服务器资源进行请求，没有做合法性验证<br>防御: (1)url白名单(2)校验返回内容(3)过滤内部ip<br>协议:(1)file(2)dict(3)gopher</p>
<p>反序列化: 序列化是将对象转化为序列,反序列化相反,过滤不严就能执行<br>防御:白名单</p>
<p>upload: 恶意文件伪装成正常文件上传并被执行<br>防御:(1)黑&#x2F;白名单(2)js校验(3)mime检测(4)文件头校验(5)文件内容校验(6)隐藏上传路径(7)禁止文件执行<br>条件竞争:上传文件没校验,上传成功才判断格式是否符合白名单,符合就重命名,不符合删除<br>二次渲染:根据上传的图片,新生成一个图片,将原始图片删除，将新图片添加到数据库中</p>
<p>include: 引入一段代码,并让服务器通过用户可控的动态变量引入文件<br>伪协议: (1)file (2)data (3)php:filter(4)php:input<br>函数: 1.include()2.require()3.include_once()4.require_once()<br>防御:(1)白名单(2)过滤危险字符(3)allow_url_include&#x3D;off(4)open_basedir&#x3D;指定目录</p>
<p>xss原理: 将恶意js插入Web页面中，浏览时会被触发<br>反射型: 不保存而是反射回受害者浏览器<br>存储型: 存入数据库,从数据库取出数据执行<br>DOM型: 不与服务器交互,通过DOM输出<br>绕过: (1)大小写&#x2F;双写(2)事件(3)伪协议：a href&#x2F;src<br>防御: (1)对输入编码(2)对cookie httponly (3)urlencode检测<br>Httponly:禁止js读取,如果cookie中的一个参数带有httponly，则这个参数将不能被js获取；httponly可以防止xss会话劫持攻击</p>
<p>sqli原理: 把SQL插入Web表单,提交请求查询,欺骗服务器执行<br> 类型:(1)报错注入(2)布尔(3)时间(4)联合(5)堆叠<br>绕过: (1)大小&#x2F;双写(2)注释符号&#x2F;**&#x2F; &lt;&gt;(3)编码:url十六进制ascii码<br>防御: (1)过滤,转义,替换,删除 (2)预编译 (3)waf</p>
<p>判断注入点:(1)’报错(2)and1&#x3D;1&#x2F;and1&#x3D;2布尔(3)sleep()时间<br>‘被过滤用&#x2F;,&#x3D;,%,宽字节注入绕过</p>
<p><span style="color:green;">宽字节注入</span><br>假如’被转义为\ ‘,其中\十六进制是%5c,mysql的GBK认为%df%5c是个宽字节,也就是’運’,使’逃逸出来<br><span style="color:green;">二次注入</span><br>脏数据存入数据库后,被直接取出并进入SQL查询语句<br><span style="color:green;">盲注sleep()函数禁用</span><br>同样功能的函数代替，比如benchmark() Get_lock()函数<br><span style="color:green;">报错注入的函数</span><br>updatexml(),exp(),floor(),join()<br><span style="color:green;">sqli写shell</span><br>通过outfile,将马写入eval.php<br>?id&#x3D;1 union select 1,”<?马?>“ into outfile ‘绝对路径’<br>权限要求：物理路径,写入权限</p>
<p><span style="color:rgb(255, 0, 255);">菜刀流量特征</span><br>(1)eval()<br>(2)(base64_decode($_POST[z0]))<br>(3) &amp;z0&#x3D;QGluaV9zZXQ… 传payload<br><span style="color:rgb(255, 0, 255);">蚁剑流量特征：php用base64加密</span><br> (1)user-agent: antswordxxx<br> (2)@ini_set(“display_errors”,”0”);<br> (3)”_0x…..&#x3D;” 加密<br><span style="color:rgb(255, 0, 255);">冰蝎流量特征:aes对称加密</span><br>(1)3.0内置16个ua头<br>(2)http请求中content-type:application&#x2F;octet-stream；<br>(3)content-length对密钥交换,获取信息,payload定长<br><span style="color:rgb(255, 0, 255);">哥斯拉流量特征: base64加密</span><br>(1)cookie最后;<br>(2)ua弱特征<br>(3)连接状态pass&#x3D;<br><span style="color:rgb(255, 0, 255);"></p>
<p><span style="color:red;">Weblogic 反序列化</span><br>7001端口默认开启T3协议,T3协议触发的Weblogic Server WLS Core Components可以构造恶意T3数据<br><span style="color:red;">fastjson反序列化</span><br>​autotype导致攻击者可以控制@type调用set&#x2F;get方法反序列化<br><span style="color:red;">Shiro反序列化</span> Shiro框架提供RemeberMe,登录后生成cookie:key为RemeberMe,值是经过序列化-aes-base64编码的,服务端接收cookie值调用反序列化时没有过滤<br>550和721区别:550不需要Remember Cookie<br><span style="color:red;">log4j2 rce</span><br>log4j2框架的lookup提供{}字段解析,可以JNDI注入<br><span style="color:red;">struts2 rce</span><br>用户提交表单且验证失败时,后端会将提交值使用 OGNL 表达式 %{value} 解析重新填充到表单中</p>
<p><span style="color:green;">溯源: 攻击源捕获-溯源处置-攻击者画像</span><br>捕获(1)​告警 ​ 日志 蜜罐	钓鱼邮件<br>处置(2)分析恶意样本+社工定位身份&amp;ip<br>画像:(1)目的&amp;手法(2)身份&amp;单位<br><span style="color:green;">渗透测试流程: 信息收集 漏扫 手挖 报告</span><br>信息收集:谷歌语法 fofa ip 端口 子域名 旁站 c段 目录 cms whois</p>
<p><span style="color:red;">内网信息收集思路</span><br>(1)域是否存在<br>(2)域基本信息查询<br>(3)用户查询<br>(4)主机查询<br>(5)定位dc<br><span style="color:red;">内网渗透思路</span><br>信息收集  提权 爆密码&#x2F;hash ipc&#x2F;smb连接 pth&#x2F;t&#x2F;k横向  黄金&#x2F;白银维权 清日志 (隧道代理&#x2F;免杀)<br><span style="color:red;">Windows提权</span><br>内核溢出<br>at,sc,ps<br>数据库<br>进程注入<br>令牌窃取<br>DLL劫持<br>引号路径<br>服务权限<br><span style="color:red;">Linux提权</span><br>内核溢出<br>crontab<br>数据库<br>path<br>Suid<br>三方服务<br><span style="color:red;">Shellcode免杀:改特征码 加壳 混淆 花指令 api重写&#x2F;替换 </span><br>分离免杀: 把shellcode载入本地,loader执行<br><span style="color:red;">白银票据与黄金票据的区别</span><br>1.银票伪造tgs仅限于特定服务器的特定服务,需要目标服务账号的hash,日志都在目标服务器上<br>2.金票伪造tgt权限最高,需要krbtgt的密码hash<br><span style="color:red;">正反向shell</span><br>正向Shell：攻击者连接被攻击者 [用于攻击者内网,被攻击者公网]<br>反向Shell：被攻击者主动连接攻击者 [用于攻击者公网,被攻击者内网]<br>getshell的方式: 文件上传,rce,反序列化,远程文件包含,sqli</p>
<p>隧道:<br>    网络层：IPv6,ICMP,GRE<br>    传输层：TCP,UDP,常规端口转发<br>    应用层：SSH,HTTP,HTTS,DNS</p>
<p>判断出网站的 CMS 对渗透的意义<br>查找网上已曝光的程序漏洞如果开源,还能下载源码审计</p>
<p>cdn ip:DNS历史解析 fofa 子域名 国外ping</p>
<p>逻辑漏洞:未授权,越权,并发,短信轰炸,验证码复用,验证码绕过</p>
<p>黑链:通过利用CSS、JS隐藏链接,通常指向非法网站<br>检测:查看源码找非法链接</p>
<p>osi模型:物理层,数据链路层,网络层ip,传输层tcp&#x2F;udp,会话层,表示层http&#x2F;s telnet,应用层<br>udp和tcp: udp占用少,tcp稳定可靠</p>
<p>三次握手: 客户端向服务器发SYN,询问是否可连接,服务器回复SYN+ACK,客户端收到后回复一个ACK,连接成功</p>
<p>windows下载: (1)powershell(2)ftp(3)vbs </p>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/04/18/面试/" class="go-post">
        阅读全文
    </a>
</div>

             
<div class="page-current">
    <div class="prev">
        
    </div>
    <div class="page-index">
        
        <span class="current">
            1
        </span>
        
    </div>
    <div class="next">
        
    </div>
</div>
        </div>
    </div>
    
    <div id="home-card">
        <div id="card-div">
    <div class="card-style" style="width: 300px">
        <div class="avatar">
            <img src="/images/avatar.jpg " alt="avatar">
        </div>
        <div class="name">
            alice01
        </div>
        <div class="descriptions">
            
            <div class="description">
                𝓼𝓬𝓪𝓽𝓽𝓮𝓻𝓮𝓭 𝓲𝓷 𝔂𝓸𝓾𝓻 𝓼𝓴𝔂
            </div>
            
        </div>
        <div class="icon-links">
            
        </div>
        <div class="friend-links">
            
        </div>
    </div>
</div>
    </div>
    
</div>
                         
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2022 - 2023 𝓐𝓵𝓲𝓬𝓮01
            <span class="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            @alice01
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> & <a
                target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div>
        
    </div>
</footer>
                    </div>
                </div>
            </transition>
            <div id="img_show">
                <img id="img_content" alt="img_show">
            </div>
        </div>
        <script src="https://cdn.staticfile.org/highlight.js/11.5.1/highlight.min.js"></script>
        <script src="/js/particlex.js"></script>
        <script src="/js/showimg.js"></script>
        

    </body>
</html>